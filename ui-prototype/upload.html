<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Upload Your Network - Visual Social Graph</title>
  <link rel="stylesheet" href="css/components.css">

  <script>
    (function() {
      const theme = localStorage.getItem('vsg-theme');
      if (theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        document.documentElement.classList.add('dark');
      }
    })();
  </script>

  <style>
    .upload-page {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .upload-container {
      flex: 1;
      max-width: 800px;
      margin: 0 auto;
      padding: var(--vsg-space-8) var(--vsg-space-4);
      width: 100%;
    }

    /* Progress Steps */
    .progress-steps {
      display: flex;
      justify-content: center;
      margin-bottom: var(--vsg-space-12);
    }

    .step-indicator {
      display: flex;
      align-items: center;
    }

    .step-dot {
      width: 32px;
      height: 32px;
      border-radius: var(--vsg-radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--vsg-text-sm);
      font-weight: var(--vsg-font-semibold);
      background-color: var(--vsg-bg-tertiary);
      color: var(--vsg-text-tertiary);
      transition: all var(--vsg-duration-normal);
    }

    .step-dot.active {
      background-color: var(--vsg-accent-primary);
      color: var(--vsg-white);
    }

    .step-dot.completed {
      background-color: var(--vsg-success-500);
      color: var(--vsg-white);
    }

    .step-line {
      width: 60px;
      height: 2px;
      background-color: var(--vsg-border-light);
      margin: 0 var(--vsg-space-2);
    }

    .step-line.completed {
      background-color: var(--vsg-success-500);
    }

    @media (max-width: 639px) {
      .step-line { width: 30px; }
    }

    /* Upload Screens */
    .upload-screen {
      display: none;
      animation: fadeIn var(--vsg-duration-normal) var(--vsg-ease-out);
    }

    .upload-screen.active {
      display: block;
    }

    .screen-header {
      text-align: center;
      margin-bottom: var(--vsg-space-8);
    }

    .screen-title {
      font-size: var(--vsg-text-3xl);
      font-weight: var(--vsg-font-bold);
      margin-bottom: var(--vsg-space-3);
    }

    .screen-subtitle {
      font-size: var(--vsg-text-lg);
      color: var(--vsg-text-secondary);
    }

    /* Mode Selection (Screen 0) */
    .mode-options {
      display: flex;
      flex-direction: column;
      gap: var(--vsg-space-4);
      max-width: 500px;
      margin: 0 auto;
    }

    .mode-option {
      display: flex;
      align-items: flex-start;
      gap: var(--vsg-space-4);
      padding: var(--vsg-space-6);
      border: 2px solid var(--vsg-border-light);
      border-radius: var(--vsg-radius-md);
      cursor: pointer;
      transition: all var(--vsg-duration-fast);
    }

    .mode-option:hover {
      border-color: var(--vsg-accent-primary);
      background-color: var(--vsg-orange-50);
    }

    .mode-option.selected {
      border-color: var(--vsg-accent-primary);
      background-color: var(--vsg-orange-50);
    }

    .mode-radio {
      width: 24px;
      height: 24px;
      border: 2px solid var(--vsg-border-medium);
      border-radius: var(--vsg-radius-full);
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2px;
    }

    .mode-option.selected .mode-radio {
      border-color: var(--vsg-accent-primary);
    }

    .mode-option.selected .mode-radio::after {
      content: '';
      width: 12px;
      height: 12px;
      background-color: var(--vsg-accent-primary);
      border-radius: var(--vsg-radius-full);
    }

    .mode-content h4 {
      margin-bottom: var(--vsg-space-1);
    }

    .mode-badge {
      display: inline-block;
      margin-left: var(--vsg-space-2);
    }

    /* Platform Selection Grid */
    .platform-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--vsg-space-4);
    }

    .platform-card {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: var(--vsg-space-6);
      border: 2px solid var(--vsg-border-light);
      border-radius: var(--vsg-radius-md);
      cursor: pointer;
      transition: all var(--vsg-duration-fast);
      text-align: center;
    }

    .platform-card:hover:not(.disabled) {
      border-color: var(--vsg-accent-primary);
      transform: translateY(-4px);
      box-shadow: var(--vsg-shadow-md);
    }

    .platform-card.selected {
      border-color: var(--vsg-accent-primary);
      background-color: var(--vsg-orange-50);
    }

    .platform-card.disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .platform-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      margin-bottom: var(--vsg-space-3);
    }

    .platform-name {
      font-weight: var(--vsg-font-semibold);
      margin-bottom: var(--vsg-space-1);
    }

    .platform-status {
      font-size: var(--vsg-text-xs);
      color: var(--vsg-text-tertiary);
    }

    /* Instructions Panel */
    .instructions-panel {
      background-color: var(--vsg-bg-secondary);
      border-radius: var(--vsg-radius-md);
      padding: var(--vsg-space-6);
      margin-bottom: var(--vsg-space-6);
    }

    .instructions-header {
      display: flex;
      align-items: center;
      gap: var(--vsg-space-3);
      margin-bottom: var(--vsg-space-4);
    }

    .instructions-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      background-color: var(--vsg-bg-primary);
      border-radius: var(--vsg-radius-sm);
    }

    .instructions-list {
      list-style: none;
      counter-reset: step;
    }

    .instructions-list li {
      position: relative;
      padding-left: var(--vsg-space-8);
      padding-bottom: var(--vsg-space-4);
      border-left: 2px solid var(--vsg-border-light);
      margin-left: var(--vsg-space-3);
    }

    .instructions-list li:last-child {
      border-left-color: transparent;
      padding-bottom: 0;
    }

    .instructions-list li::before {
      counter-increment: step;
      content: counter(step);
      position: absolute;
      left: -13px;
      width: 24px;
      height: 24px;
      background-color: var(--vsg-accent-primary);
      color: var(--vsg-white);
      border-radius: var(--vsg-radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: var(--vsg-text-xs);
      font-weight: var(--vsg-font-semibold);
    }

    .instructions-meta {
      display: flex;
      gap: var(--vsg-space-6);
      margin-top: var(--vsg-space-4);
      padding-top: var(--vsg-space-4);
      border-top: 1px solid var(--vsg-border-light);
    }

    .meta-item {
      display: flex;
      align-items: center;
      gap: var(--vsg-space-2);
      font-size: var(--vsg-text-sm);
      color: var(--vsg-text-secondary);
    }

    .meta-item svg {
      width: 16px;
      height: 16px;
      color: var(--vsg-accent-primary);
    }

    /* Processing Screen */
    .processing-container {
      max-width: 500px;
      margin: 0 auto;
      text-align: center;
    }

    .processing-animation {
      width: 120px;
      height: 120px;
      margin: 0 auto var(--vsg-space-8);
      position: relative;
    }

    .processing-ring {
      width: 100%;
      height: 100%;
      border: 4px solid var(--vsg-border-light);
      border-top-color: var(--vsg-accent-primary);
      border-radius: var(--vsg-radius-full);
      animation: spin 1s linear infinite;
    }

    .processing-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 40px;
    }

    .processing-progress {
      margin-bottom: var(--vsg-space-8);
    }

    .processing-status {
      font-size: var(--vsg-text-lg);
      font-weight: var(--vsg-font-semibold);
      margin-bottom: var(--vsg-space-2);
    }

    .processing-detail {
      font-size: var(--vsg-text-sm);
      color: var(--vsg-text-secondary);
      margin-bottom: var(--vsg-space-4);
    }

    /* Success Screen */
    .success-container {
      text-align: center;
      max-width: 500px;
      margin: 0 auto;
    }

    .success-icon {
      width: 80px;
      height: 80px;
      margin: 0 auto var(--vsg-space-6);
      background-color: var(--vsg-success-50);
      border-radius: var(--vsg-radius-full);
      display: flex;
      align-items: center;
      justify-content: center;
      animation: scaleIn var(--vsg-duration-normal) var(--vsg-ease-spring);
    }

    .success-icon svg {
      width: 40px;
      height: 40px;
      color: var(--vsg-success-500);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: var(--vsg-space-4);
      margin: var(--vsg-space-8) 0;
    }

    .stat-item {
      padding: var(--vsg-space-4);
      background-color: var(--vsg-bg-secondary);
      border-radius: var(--vsg-radius-md);
    }

    .stat-value {
      font-size: var(--vsg-text-2xl);
      font-weight: var(--vsg-font-bold);
      color: var(--vsg-accent-primary);
    }

    .stat-label {
      font-size: var(--vsg-text-sm);
      color: var(--vsg-text-secondary);
    }

    /* Navigation buttons */
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: var(--vsg-space-8);
      padding-top: var(--vsg-space-6);
      border-top: 1px solid var(--vsg-border-light);
    }

    .nav-buttons.center {
      justify-content: center;
    }

    /* Info Banner */
    .info-banner {
      display: flex;
      align-items: flex-start;
      gap: var(--vsg-space-3);
      padding: var(--vsg-space-4);
      background-color: var(--vsg-info-50);
      border-radius: var(--vsg-radius-sm);
      margin-top: var(--vsg-space-4);
    }

    .info-banner svg {
      width: 20px;
      height: 20px;
      color: var(--vsg-info-500);
      flex-shrink: 0;
      margin-top: 2px;
    }

    .info-banner p {
      font-size: var(--vsg-text-sm);
      color: var(--vsg-info-600);
    }

    /* File preview */
    .file-preview {
      display: flex;
      align-items: center;
      gap: var(--vsg-space-4);
      padding: var(--vsg-space-4);
      background-color: var(--vsg-bg-tertiary);
      border-radius: var(--vsg-radius-sm);
      margin-top: var(--vsg-space-4);
    }

    .file-icon {
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: var(--vsg-orange-100);
      border-radius: var(--vsg-radius-sm);
      color: var(--vsg-accent-primary);
    }

    .file-info {
      flex: 1;
    }

    .file-name {
      font-weight: var(--vsg-font-medium);
      margin-bottom: var(--vsg-space-1);
    }

    .file-size {
      font-size: var(--vsg-text-sm);
      color: var(--vsg-text-secondary);
    }

    .file-remove {
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: none;
      cursor: pointer;
      border-radius: var(--vsg-radius-sm);
      color: var(--vsg-text-tertiary);
    }

    .file-remove:hover {
      background-color: var(--vsg-error-50);
      color: var(--vsg-error-500);
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="upload-page">
    <!-- Header -->
    <header class="header">
      <a href="index.html" class="logo">
        <svg class="logo-icon" viewBox="0 0 32 32" fill="none">
          <circle cx="16" cy="16" r="14" stroke="currentColor" stroke-width="2"/>
          <circle cx="16" cy="16" r="6" fill="currentColor"/>
          <circle cx="16" cy="6" r="3" fill="currentColor"/>
          <circle cx="24" cy="20" r="3" fill="currentColor"/>
          <circle cx="8" cy="20" r="3" fill="currentColor"/>
        </svg>
        <span>Visual Social Graph</span>
      </a>

      <nav class="nav">
        <a href="index.html" class="nav-link">‚Üê Back to Home</a>
      </nav>
    </header>

    <div class="upload-container">
      <!-- Progress Steps -->
      <div class="progress-steps">
        <div class="step-indicator">
          <div class="step-dot active" id="step1">1</div>
          <div class="step-line" id="line1"></div>
          <div class="step-dot" id="step2">2</div>
          <div class="step-line" id="line2"></div>
          <div class="step-dot" id="step3">3</div>
          <div class="step-line" id="line3"></div>
          <div class="step-dot" id="step4">4</div>
          <div class="step-line" id="line4"></div>
          <div class="step-dot" id="step5">5</div>
        </div>
      </div>

      <!-- Screen 0: Mode Selection -->
      <div class="upload-screen active" id="screen0">
        <div class="screen-header">
          <h1 class="screen-title">Choose Analysis Mode</h1>
          <p class="screen-subtitle">How would you like us to process your data?</p>
        </div>

        <div class="mode-options">
          <div class="mode-option selected" onclick="selectMode(this, 'standard')">
            <div class="mode-radio"></div>
            <div class="mode-content">
              <h4 class="h5">
                Standard Mode
                <span class="badge badge-success mode-badge">Recommended</span>
              </h4>
              <p class="body-sm text-secondary">
                Process locally in your browser. Your data never leaves your device.
                Optimized for performance and accuracy.
              </p>
            </div>
          </div>

          <div class="mode-option" onclick="selectMode(this, 'offline')">
            <div class="mode-radio"></div>
            <div class="mode-content">
              <h4 class="h5">Offline / Air-gapped Mode</h4>
              <p class="body-sm text-secondary">
                For maximum security. Disable all network requests.
                No analytics, no updates, completely isolated.
              </p>
            </div>
          </div>
        </div>

        <div class="nav-buttons center">
          <button class="btn btn-primary btn-lg" onclick="nextScreen()">
            Continue
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Screen 1: Platform Selection -->
      <div class="upload-screen" id="screen1">
        <div class="screen-header">
          <h1 class="screen-title">Select Your Platform</h1>
          <p class="screen-subtitle">Which social network archive would you like to analyze?</p>
        </div>

        <div class="platform-grid">
          <div class="platform-card" onclick="selectPlatform(this, 'twitter')">
            <div class="platform-icon">ùïè</div>
            <div class="platform-name">Twitter / X</div>
            <div class="platform-status">Supported</div>
          </div>

          <div class="platform-card" onclick="selectPlatform(this, 'linkedin')">
            <div class="platform-icon" style="background: #0077B5; color: white; border-radius: 8px; font-size: 24px; font-weight: bold;">in</div>
            <div class="platform-name">LinkedIn</div>
            <div class="platform-status">Supported</div>
          </div>

          <div class="platform-card" onclick="selectPlatform(this, 'instagram')">
            <div class="platform-icon">üì∑</div>
            <div class="platform-name">Instagram</div>
            <div class="platform-status">Supported</div>
          </div>

          <div class="platform-card" onclick="selectPlatform(this, 'facebook')">
            <div class="platform-icon" style="background: #1877F2; color: white; border-radius: 8px; font-size: 24px; font-weight: bold;">f</div>
            <div class="platform-name">Facebook</div>
            <div class="platform-status">Supported</div>
          </div>

          <div class="platform-card disabled">
            <div class="platform-icon">‚ô™</div>
            <div class="platform-name">TikTok</div>
            <span class="badge badge-neutral">Coming Soon</span>
          </div>

          <div class="platform-card disabled">
            <div class="platform-icon">üêò</div>
            <div class="platform-name">Mastodon</div>
            <span class="badge badge-neutral">Coming Soon</span>
          </div>
        </div>

        <div class="nav-buttons">
          <button class="btn btn-ghost btn-md" onclick="prevScreen()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back
          </button>
          <button class="btn btn-primary btn-lg" onclick="nextScreen()" id="platformNext" disabled>
            Continue
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Screen 2: Download Instructions -->
      <div class="upload-screen" id="screen2">
        <div class="screen-header">
          <h1 class="screen-title">Download Your Archive</h1>
          <p class="screen-subtitle">Follow these steps to get your data from <span id="platformName">Twitter</span></p>
        </div>

        <div class="instructions-panel">
          <div class="instructions-header">
            <div class="instructions-icon" id="instructionsIcon">ùïè</div>
            <div>
              <h4 class="h5" id="instructionsTitle">Twitter / X Archive</h4>
              <a href="#" class="body-sm text-accent" id="downloadLink" target="_blank">Open Twitter Settings ‚Üí</a>
            </div>
          </div>

          <ol class="instructions-list" id="instructionsList">
            <li>Go to Settings ‚Üí Your Account ‚Üí Download an archive</li>
            <li>Click 'Request archive' and verify your identity</li>
            <li>Wait for email notification (usually 24-48 hours)</li>
            <li>Download the ZIP file from the link in the email</li>
            <li>Upload the complete ZIP file here</li>
          </ol>

          <div class="instructions-meta">
            <div class="meta-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              </svg>
              <span id="waitTime">24-48 hours wait</span>
            </div>
            <div class="meta-item">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7,10 12,15 17,10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <span id="fileSize">~50-500MB file</span>
            </div>
          </div>
        </div>

        <div class="info-banner">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
          <p>
            <strong>Already have your archive?</strong> Skip ahead to upload.
            Don't have it yet? Request it now and come back when it's ready.
          </p>
        </div>

        <div class="nav-buttons">
          <button class="btn btn-ghost btn-md" onclick="prevScreen()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back
          </button>
          <button class="btn btn-primary btn-lg" onclick="nextScreen()">
            I Have My Archive
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Screen 3: Upload Zone -->
      <div class="upload-screen" id="screen3">
        <div class="screen-header">
          <h1 class="screen-title">Upload Your Archive</h1>
          <p class="screen-subtitle">Drag and drop your ZIP file, or click to browse</p>
        </div>

        <div class="upload-zone" id="uploadZone" tabindex="0" role="button" aria-label="Upload files">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
            <polyline points="17,8 12,3 7,8"/>
            <line x1="12" y1="3" x2="12" y2="15"/>
          </svg>
          <div class="title">Drop your ZIP file here</div>
          <div class="subtitle">or click to browse your computer</div>
          <div class="hint">Supports .zip files up to 2GB</div>
        </div>

        <div class="file-preview" id="filePreview" style="display: none;">
          <div class="file-icon">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"/>
            </svg>
          </div>
          <div class="file-info">
            <div class="file-name" id="fileName">twitter-archive-2025.zip</div>
            <div class="file-size" id="fileSizeDisplay">245.8 MB</div>
          </div>
          <button class="file-remove" onclick="removeFile()" aria-label="Remove file">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>

        <div class="info-banner">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
          </svg>
          <p>
            <strong>100% Private.</strong> Your file is processed entirely in your browser.
            Nothing is uploaded to any server. We can't see your data.
          </p>
        </div>

        <div class="nav-buttons">
          <button class="btn btn-ghost btn-md" onclick="prevScreen()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
            Back
          </button>
          <button class="btn btn-primary btn-lg" onclick="startProcessing()" id="processBtn" disabled>
            Process My Network
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M5 12h14M12 5l7 7-7 7"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Screen 4: Processing -->
      <div class="upload-screen" id="screen4">
        <div class="processing-container">
          <div class="processing-animation">
            <div class="processing-ring"></div>
            <div class="processing-icon">üî¨</div>
          </div>

          <div class="processing-progress">
            <div class="processing-status" id="processingStatus">Processing Your Network Data</div>
            <div class="processing-detail" id="processingDetail">Extracting connections...</div>

            <div class="progress-wrapper mt-6">
              <div class="progress-header">
                <span class="progress-label">Progress</span>
                <span class="progress-value" id="progressPercent">35%</span>
              </div>
              <div class="progress-bar">
                <div class="progress-bar-fill" id="progressFill" style="width: 35%;"></div>
              </div>
            </div>
          </div>

          <div class="checklist" id="processingChecklist">
            <div class="checklist-item completed">
              <div class="check-icon">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <polyline points="20,6 9,17 4,12"/>
                </svg>
              </div>
              <span>Reading archive file</span>
            </div>
            <div class="checklist-item completed">
              <div class="check-icon">
                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <polyline points="20,6 9,17 4,12"/>
                </svg>
              </div>
              <span>Extracting connections</span>
            </div>
            <div class="checklist-item active">
              <div class="check-icon"></div>
              <span>Building network graph</span>
            </div>
            <div class="checklist-item">
              <div class="check-icon"></div>
              <span>Detecting communities</span>
            </div>
            <div class="checklist-item">
              <div class="check-icon"></div>
              <span>Calculating metrics</span>
            </div>
            <div class="checklist-item">
              <div class="check-icon"></div>
              <span>Generating insights</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Screen 5: Success -->
      <div class="upload-screen" id="screen5">
        <div class="success-container">
          <div class="success-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
          </div>

          <h1 class="screen-title">Your Network is Ready!</h1>
          <p class="screen-subtitle">We've analyzed your connections and found some interesting patterns.</p>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-value">247</div>
              <div class="stat-label">Connections</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">8</div>
              <div class="stat-label">Communities</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">12</div>
              <div class="stat-label">Insights</div>
            </div>
          </div>

          <div class="nav-buttons center" style="flex-direction: column; gap: var(--vsg-space-3);">
            <a href="canvas.html" class="btn btn-primary btn-xl btn-block">
              Explore Your Network
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </a>
            <a href="insights.html" class="btn btn-secondary btn-lg btn-block">
              View Insights First
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/mock-data.js"></script>
  <script>
    let currentScreen = 0;
    let selectedMode = 'standard';
    let selectedPlatform = null;
    let uploadedFile = null;

    const platformData = {
      twitter: {
        name: 'Twitter / X',
        icon: 'ùïè',
        url: 'https://twitter.com/settings/download_your_data',
        waitTime: '24-48 hours wait',
        fileSize: '~50-500MB file',
        instructions: [
          "Go to Settings ‚Üí Your Account ‚Üí Download an archive",
          "Click 'Request archive' and verify your identity",
          "Wait for email notification (usually 24-48 hours)",
          "Download the ZIP file from the link in the email",
          "Upload the complete ZIP file here"
        ]
      },
      linkedin: {
        name: 'LinkedIn',
        icon: 'in',
        url: 'https://www.linkedin.com/mypreferences/d/download-my-data',
        waitTime: '~10 minutes wait',
        fileSize: '~10-50MB file',
        instructions: [
          "Go to Settings ‚Üí Data Privacy ‚Üí Get a copy of your data",
          "Select 'Connections' and other relevant data",
          "Click 'Request archive'",
          "Download when ready (usually within 10 minutes)",
          "Upload the ZIP file here"
        ]
      },
      instagram: {
        name: 'Instagram',
        icon: 'üì∑',
        url: 'https://www.instagram.com/download/request/',
        waitTime: 'Up to 48 hours',
        fileSize: '~100MB-2GB file',
        instructions: [
          "Go to Settings ‚Üí Privacy and Security ‚Üí Download Data",
          "Enter your email and request download",
          "Wait for email with download link",
          "Download and extract the ZIP file",
          "Upload the complete folder here"
        ]
      },
      facebook: {
        name: 'Facebook',
        icon: 'f',
        url: 'https://www.facebook.com/dyi/',
        waitTime: 'Hours to days',
        fileSize: '~500MB-5GB file',
        instructions: [
          "Go to Settings ‚Üí Your Facebook Information ‚Üí Download Your Information",
          "Select 'Friends' and 'Messages' categories",
          "Choose JSON format for best compatibility",
          "Request and wait for download link email",
          "Upload the complete ZIP here"
        ]
      }
    };

    function selectMode(element, mode) {
      document.querySelectorAll('.mode-option').forEach(opt => opt.classList.remove('selected'));
      element.classList.add('selected');
      selectedMode = mode;
    }

    function selectPlatform(element, platform) {
      if (element.classList.contains('disabled')) return;

      document.querySelectorAll('.platform-card').forEach(card => card.classList.remove('selected'));
      element.classList.add('selected');
      selectedPlatform = platform;
      document.getElementById('platformNext').disabled = false;
    }

    function updateInstructions() {
      if (!selectedPlatform) return;

      const data = platformData[selectedPlatform];
      document.getElementById('platformName').textContent = data.name;
      document.getElementById('instructionsTitle').textContent = data.name + ' Archive';
      document.getElementById('instructionsIcon').textContent = data.icon;
      document.getElementById('downloadLink').href = data.url;
      document.getElementById('waitTime').textContent = data.waitTime;
      document.getElementById('fileSize').textContent = data.fileSize;

      const list = document.getElementById('instructionsList');
      list.innerHTML = data.instructions.map(step => `<li>${step}</li>`).join('');
    }

    function updateProgressSteps() {
      for (let i = 1; i <= 5; i++) {
        const dot = document.getElementById(`step${i}`);
        const line = document.getElementById(`line${i}`);

        if (i < currentScreen + 1) {
          dot.classList.remove('active');
          dot.classList.add('completed');
          dot.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20,6 9,17 4,12"/></svg>';
          if (line) line.classList.add('completed');
        } else if (i === currentScreen + 1) {
          dot.classList.add('active');
          dot.classList.remove('completed');
          dot.textContent = i;
        } else {
          dot.classList.remove('active', 'completed');
          dot.textContent = i;
          if (line) line.classList.remove('completed');
        }
      }
    }

    function showScreen(index) {
      document.querySelectorAll('.upload-screen').forEach((screen, i) => {
        screen.classList.toggle('active', i === index);
      });
      currentScreen = index;
      updateProgressSteps();
    }

    function nextScreen() {
      if (currentScreen === 1) {
        updateInstructions();
      }
      showScreen(currentScreen + 1);
    }

    function prevScreen() {
      showScreen(currentScreen - 1);
    }

    // Upload Zone Interactions
    const uploadZone = document.getElementById('uploadZone');
    const fileInput = document.createElement('input');
    fileInput.type = 'file';
    fileInput.accept = '.zip';
    fileInput.style.display = 'none';
    document.body.appendChild(fileInput);

    uploadZone.addEventListener('click', () => fileInput.click());
    uploadZone.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        fileInput.click();
      }
    });

    uploadZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      uploadZone.classList.add('dragover');
    });

    uploadZone.addEventListener('dragleave', () => {
      uploadZone.classList.remove('dragover');
    });

    uploadZone.addEventListener('drop', (e) => {
      e.preventDefault();
      uploadZone.classList.remove('dragover');
      const files = e.dataTransfer.files;
      if (files.length > 0) handleFile(files[0]);
    });

    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) handleFile(e.target.files[0]);
    });

    function handleFile(file) {
      if (!file.name.endsWith('.zip')) {
        alert('Please upload a ZIP file');
        return;
      }

      uploadedFile = file;
      document.getElementById('fileName').textContent = file.name;
      document.getElementById('fileSizeDisplay').textContent = formatFileSize(file.size);
      document.getElementById('filePreview').style.display = 'flex';
      uploadZone.classList.add('success');
      document.getElementById('processBtn').disabled = false;
    }

    function removeFile() {
      uploadedFile = null;
      document.getElementById('filePreview').style.display = 'none';
      uploadZone.classList.remove('success');
      document.getElementById('processBtn').disabled = true;
      fileInput.value = '';
    }

    function formatFileSize(bytes) {
      if (bytes < 1024) return bytes + ' B';
      if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
      if (bytes < 1024 * 1024 * 1024) return (bytes / (1024 * 1024)).toFixed(1) + ' MB';
      return (bytes / (1024 * 1024 * 1024)).toFixed(1) + ' GB';
    }

    function startProcessing() {
      showScreen(4);
      simulateProcessing();
    }

    function simulateProcessing() {
      const stages = [
        { progress: 15, status: 'Reading archive file', detail: 'Unpacking ZIP contents...' },
        { progress: 35, status: 'Extracting connections', detail: 'Found 1,842 interactions...' },
        { progress: 55, status: 'Building network graph', detail: 'Creating 247 nodes and edges...' },
        { progress: 70, status: 'Detecting communities', detail: 'Identified 8 distinct groups...' },
        { progress: 85, status: 'Calculating metrics', detail: 'Computing betweenness, pagerank...' },
        { progress: 100, status: 'Generating insights', detail: 'Found 12 actionable insights!' }
      ];

      let currentStage = 0;
      const checklistItems = document.querySelectorAll('.checklist-item');

      function updateStage() {
        if (currentStage >= stages.length) {
          setTimeout(() => showScreen(5), 500);
          return;
        }

        const stage = stages[currentStage];
        document.getElementById('processingStatus').textContent = stage.status;
        document.getElementById('processingDetail').textContent = stage.detail;
        document.getElementById('progressPercent').textContent = stage.progress + '%';
        document.getElementById('progressFill').style.width = stage.progress + '%';

        // Update checklist
        checklistItems.forEach((item, i) => {
          if (i < currentStage) {
            item.classList.add('completed');
            item.classList.remove('active');
          } else if (i === currentStage) {
            item.classList.add('active');
            item.classList.remove('completed');
          } else {
            item.classList.remove('active', 'completed');
          }
        });

        currentStage++;
        setTimeout(updateStage, 1500);
      }

      updateStage();
    }
  </script>
</body>
</html>
